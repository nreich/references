<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
<script type="text/javascript">

$(document).ready(function(){
    $("div#abstract_text").hide();
    
    $("#abstract").mouseover(function(){
        $("#abstract_text",this).show();
    }).mouseout(function(){
        $("#abstract_text",this).hide();
    });
    
});
</script>

<style>
div#abstract_text{
    width:600px;
    height:400px;
    background-color:#E8E8E8;
    position:fixed;
    top:200px;
    left:500px;
    padding:5px;
    
}

#abstract{
	cursor:pointer;
}
</style>

<h1>Citations#index</h1>
<p>Find me in app/views/citations/index.html.erb</p>

<table>
	<thead>
		<tr class="table_header">
			<th id="ref_table_title_head">Title</th>
			<th id="ref_table_abstract_head">Abstract</th>
			<th id="ref_table_author_head">Authors</th>
			<th id="ref_table_journal_head">Citation</th>
			<th id="ref_table_patent_head">Patent Number</th>
		</tr>
	</thead>
	<tbody>
		<% @citation.each do |ref| %>
		  <tr>
		    <td>
		    	<% unless ref.title.nil? %> 
		    		<%= link_to ref.title, ref %>
		    	<% else %>
		    		<%= "no title"%>
		    	<% end %>
	    	</td>
	    	<td id="abstract">
	    		<% unless ref.abstract.nil? %> 
		    		<%=raw "expand<div id=\"abstract_text\">" + ref.abstract + "</div>" %>
		    	<% else %>
		    		<%= "no abstract"%>
		    	<% end %>
    		</td>
		    <td>
		    	<% unless ref.author_list.empty? %> 
		    	<%= ref.author_list %>
		    	<% end %>
	    	</td>
	    	<td>
	    		<% if ref.citation_type == "journal" %>
		    		<% unless ref.journal.nil?%>
		    			<%=raw "<i>" + ref.journal + "</i>" %>
		    			<% unless ref.publish_year.nil? %>
		    				<%=raw "<b>" + ref.publish_year.to_s  + "</b>, " %>
		    				<%= ref.volume + ", " + ref.pages + "." %>
		    			<% end %>
		    		<% end %>
	    		<% elsif ref.citation_type == "patent" %>
	    			<% unless ref.patent_number.nil? %> 
		    			<%= ref.patent_number %>
		    		<% end %>
	    		<% end %>
	    	</td>
		    <td>
		    	<% unless ref.patent_number.nil? %> 
		    	<%= ref.patent_number %>
		    	<% end %>
		    </td>
		  </tr>
		<% end %>
	</tbody>
</table>


